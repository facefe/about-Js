<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<div id="show1">1</div>
<input type="text" class="input">
<script>
    /**
     * 防抖和节流。
     */
    //
    // function f() {
    //     var num = 1;
    //
    //     function f1() {
    //         num++;
    //         return num;
    //     }
    //     return f1;
    // }
    // var f3 = f();
    // /**
    //  * 利用闭包写的简单函数
    //  */
    // function ff(e) {
    //     this.innerText = f3();
    //     console.log(e);
    // }
    // let fff = debounce(ff, 500);
    // document.getElementById("show1").addEventListener('mousemove', fff);

    /**
     * 防抖函数
     * 事件绑定函数的第一个参数一般是 e 事件原对象。所以要保证完成传递
     *
     */

        // function debounce(func, waitT) {
        //     //
        //     let timer;
        //     // 闭包
        //     return function () {
        //         let self = this;
        //         let args = arguments;
        //         if (timer) {
        //             clearTimeout(timer);
        //         }
        //
        //         timer = setTimeout(function () {
        //             func.apply(self, args);
        //         }, waitT)
        //     }
        // }

    let timer = null;

    document.getElementsByClassName('input')[0].addEventListener('input', function (e) {
        const self = this;
        if (timer) {
            clearTimeout(timer);
        }
        timer = setTimeout(function () {
            console.log(self.innerText);
            console.log(self);
            console.log(e);
        }, 1000)
    });

    function fShow(func, wait) {
        let timer;
        return function () {
            if (timer) {
                clearTimeout(timer);
            }
            timer = setTimeout(function () {
                func();
            },wait)
        }
    }


</script>
</body>
</html>